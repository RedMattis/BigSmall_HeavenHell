WIP. This won't currently run because it depends on mods I've not yet updated.
